<script>
/* ===== ELEMENTOS ===== */
const menuBtn   = document.getElementById("menuBtn");
const menu      = document.getElementById("menu");
const overlay   = document.getElementById("overlay");
const themeBtn  = document.getElementById("themeBtn");
const counterEl = document.getElementById("counter");

const menuItems = document.querySelectorAll(".menu span");
const sections  = document.querySelectorAll(".section");

/* ===== MENU ABRIR / CERRAR ===== */
menuBtn.addEventListener("click", () => {
  menu.classList.toggle("open");
  overlay.classList.toggle("active");
});

overlay.addEventListener("click", () => {
  closeMenu();
});

function closeMenu(){
  menu.classList.remove("open");
  overlay.classList.remove("active");
}

/* ===== MENU SCROLL ===== */
menuItems.forEach((item, index) => {
  item.addEventListener("click", () => {
    sections[index].scrollIntoView({ behavior: "smooth" });
    closeMenu();
  });
});

/* ===== THEME ===== */
if (localStorage.theme === "light") {
  document.body.classList.add("light");
}

themeBtn.addEventListener("click", () => {
  document.body.classList.toggle("light");
  localStorage.theme = document.body.classList.contains("light")
    ? "light"
    : "dark";
});

/* ===== COUNTER ===== */
let count = Number(localStorage.items) || 0;
counterEl.textContent = count;

setInterval(() => {
  count++;
  counterEl.textContent = count;
  localStorage.items = count;
}, 3000);

/* ===== SECTION ANIMATION ===== */
const observer = new IntersectionObserver(entries => {
  entries.forEach(entry => {
    entry.target.classList.toggle("visible", entry.isIntersecting);
  });
},{ threshold: 0.25 });

sections.forEach(section => observer.observe(section));

/* ===== GLOW FOLLOW CURSOR ===== */
document.querySelectorAll(".card,.counter-card,.contact a").forEach(el => {
  el.addEventListener("mousemove", e => {
    const r = el.getBoundingClientRect();
    el.style.setProperty("--x", `${e.clientX - r.left}px`);
    el.style.setProperty("--y", `${e.clientY - r.top}px`);
  });
});
</script>
